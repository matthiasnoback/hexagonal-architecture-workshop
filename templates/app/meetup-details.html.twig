{% extends "@layout/default.html.twig" %}

{% block title %}{{ meetupDetails.name }}{% endblock %}

{% block content %}
    <h2>{{ meetupDetails.organizer.name }} presents: {{ meetupDetails.name }}</h2>

    <p><small>{{ meetupDetails.scheduledFor|date() }}</small></p>
    <p>{{ meetupDetails.description }}</p>

    <h3>Attendees</h3>
    {% if meetupDetails.attendees|length > 0 %}
        <ul class="attendees">
        {% for user in meetupDetails.attendees %}
            <li>{{ user.name }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No attendees yet.</p>
    {% endif %}

    {% if session.isLoggedInUser(meetupDetails.organizerId) %}
        <form action="{{ path('cancel_meetup') }}" method="post">
            <input type="hidden" name="meetupId" value="{{ meetupDetails.meetupId }}">
            <button class="btn btn-danger">Cancel this meetup</button>
        </form>
    {% else %}
        <form action="{{ path('rsvp_for_meetup') }}" method="post">
            <input type="hidden" name="meetupId" value="{{ meetupDetails.meetupId }}">
            <button class="btn btn-success">RSVP</button>
        </form>
    {% endif %}

{% endblock %}
